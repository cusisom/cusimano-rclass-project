---
title: "Palmer Penguins Analysis"
author: "Daniel Cusimano"
date: "03/30/2023"
output: html_document
---
This is going to be a working process that will ultimately trim a lot of fat along the way (including this explanation). The goal is for me to set up the webpage with the needed stats and images and then to edit by adding text content and removing the template content. 
  
All of the original content will be below my workstream until I am ready to remove it. 
  
This Quarto file loads the cleaned Palmer Penguins data and does some initial analysis. I find this step very helpful for seeing what results you have to work with for your talk or paper/final report. 

Some of what is written below is for you. I would like you to modify this quarto file to produce a document customized for your analysis and written to explain your thinking in your data analysis so feel free to modify as much as you wish. 

It is worth taking a minute to reflect on where we are in the data analysis workflow. The purpose of the previous processing document was to document data cleaning and processing in preparation for analysis. You saw that as part of the cleaning and processing step, we already had to explore the data somewhat to understand how to clean it. In general, as you explore, you find more things that need cleaning. As you clean, you find more to explore. 

# The need to document your workflow

Although we broke our workflow in this project into cleaning and analysis steps, depending on your project, it may be more logical to divide the scripts in other ways. The organization should naturally reflect the workflow. 

In rather clean datasets at times it might make more sense to combine the cleaning and exploring code parts into a single R or Quarto file. _But if you do have real errors to fix, you will want to carefully document cleaning steps_, and probably not redo the cleaning each time you want to get a bit further on your data exploration and analysis. Itʻs a lot of baggage to carry around and also errors might creep in if you are keeping code in your script that you are not actively working on. 

When there are natural breaks in the workflow (i.e., when you close the door on cleaning or on a first analysis), it can be a good idea to have start a new script because once you clean your data, you will have a new starting point for all of your downstream analyses (and not look back at the really raw data, unless you want to change your mind about some of the cleaning - thus the need for keeping an original raw data file and documenting all the steps).  

This can also come up when you have a multi-stage analysis. In very complex analyses, it can make a lot of sense to have separate scripts for major analyses or workflow steps. As always, use your jugement, and be intentional about your organization. Clean organization = clear thinking.  


# Analysis 

If you did a good job in the previous step, you should have a pretty good idea of the structure of the data. 

For this part of the project, develop three questions and use your R skills to answer them. Begin by producing a summary table of the data that could be included in a future paper. You should produce plots or tables and/or statistics or model fits to address your questions. 

# Setup

The setup has mostly remained the same except that I am adding dplyr and various new files paths

```{r }
#| cache = FALSE
knitr::read_chunk('analysiscode.R')
```

Load needed packages and filepaths.  

```{r setup}
#| message: FALSE
#| warning: FALSE
```

Load custom functions. I haven't messed with this mostly because I don't fully understand it. 

```{r functions}
```

Load the data.

```{r loaddata}
```

# Create a summary table

In any paper you should always report a summary of the data. This includes basic statsistics for your data including sample size, counts, and means and standard errors for continuous data. 

Here we will use skimr which produces a summary table, but with more than we want. Letʻs save it as an object so we can grab the elements we want. 

It turns out that the `skim()` function returns a tibble. We can coerce it to a dataframe and use `head()` to see what the column names are and what the data look like. 

```{r, summarize}
```

## Select columns for a final summary table

Letʻs retain only the variable, N, mean, sd, and category counts, but letʻs rename them. Since we will use the SD to compute the stadard error letʻs just rename it as SE now and save a step later.  (Remember the standard error is just the standard deviation/ square root(sample size)). 

Note: The `results="asis"` is an option for `knitr` to layout the the results without the code formatting. Normally output from code chunks has the look of R output. `"asis"` (as in "as is", lol) removes that behavior, so we can lay it out as a typeset table for print. 

```{r summary.table, results="asis"}
```


# Body Mass Distribution
## Species Interspecific and Intraspecific Varition

I am first interested in the size distribution of the Palmer Penguins. I begin by examining the Interspecific variation in Body Mass. 


```{r, Dimorphism1}
```
I chose to change this to a violin plot to get a clearer illustration of size distribution. 

```{r, Dimorphism2}
```

I like this plot. It illustrates that Adelie and Gentoo penguins have a wider range in Body Mass than do Chinstrap Penguins.

My question is whether these wider ranges in Body Mass reflect stronger Sexual Size Dimorphism in Adelie and Gentoo Penguins than in Chinstrap Penguins. Thus, I set up a plot that differentiates by Species and Sex.

First I need to remove the NA values. 

```{r, subsetting1}
```

Now I can plot. 

```{r, Dimorphism4}
```

The plot shows clear dimorphism with Gentoo Penguins. It also illustrates stronger dimorphism in Adelie than Chinstrap populations but it is more subtle.

## Analysis of Sexual Size Dimorphism


I need to represent this Sexual Size Dimorphism statistically.
This can be done by means of a Welch Two Sample T-test.
I run the test for each species.

### Adelie Penguins

For the Adelie Penguins I first subset the species and remove NA values


```{r, Adelie_T-test1}
```
To test the means of each population (Male and Female) I need to filter the population into individual vectors

```{r, Adelie_T-test2}
```

It seems that the statistics support a distinct difference in Male and Female Body Mass.

```{r, Gentoo_T-test1}
```

```{r, Gentoo_T-test2}
```

```{r, Chinstrap_T-test1}
```

```{r, Chinstrap_T-test2}
```

